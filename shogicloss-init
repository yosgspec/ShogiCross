#!/usr/bin/env node
"use strict";

const path = require("path");
const fs = require("fs/promises");

const basePath = "src/dist/";

(async function(){
	const moduleDir = "./node_modules/shogicross";
	const pack = JSON.parse(await fs.readFile("./package.json", "utf8"));
	const entry = pack.main ?? "./";
	const entryDir = path.dirname(entry);

	const cpFiles = ["json/", "img/"].map(f=>path.join(basePath, f));
	await Promise.all(
		cpFiles.map(async f=>{
			const moduleFiles = path.join(moduleDir, f);
			const entryFiles = path.join(entryDir, f);
			return fs.cp(moduleFiles, entryFiles, {recursive: true})
		})
	);
	console.log("ShogiCross init Success!");
})();
